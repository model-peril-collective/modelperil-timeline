{"version":3,"file":"static/js/Story.7c8148aa.chunk.js","mappings":"6MACA,QAA4B,yBAA5B,EAAsE,8BAAtE,EAA8G,uBAA9G,EAAoJ,4BAApJ,EAAuL,oBAAvL,EAA4P,qBAA5P,EAA4R,wBAA5R,EAAyU,kC,aCOzUA,EAAAA,GAAKC,eAAeC,EAAAA,GAEpB,MAAMC,GAAWC,EAAAA,EAAAA,OAAK,IAAMC,EAAAA,EAAiBC,kBAqF7C,EA3EeC,IACb,MAAM,UAAEC,EAAS,KAAEC,EAAI,GAAEC,EAAE,SAAEC,EAAQ,MAAEC,GAAUL,EAC3CM,GAAWC,EAAAA,EAAAA,QAAuB,MAClCC,GAAgBD,EAAAA,EAAAA,QAAyB,IAEzCE,EAAaC,IACbA,IAAOF,EAAcG,QAAQC,SAASF,IACxCF,EAAcG,QAAQE,KAAKH,EAC7B,GAGFI,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAMtB,EAAAA,GAAKuB,SAAQ,MACN,OAAbR,QAAa,IAAbA,OAAa,EAAbA,EAAeG,QAAQM,QAAS,GAClCT,EAAcG,QAAQO,SAASC,IAC7B1B,EAAAA,GAAK2B,KAAKD,EAAK,CACbE,cAAe,CACbC,QAASH,EACTI,MAAO,iBACPC,IAAK,kBACLC,MAAO,IAGTC,EAAG,OACHC,UAAW,GACX,GAEN,GACCrB,GACH,MAAO,IAAMS,EAAIa,QAAQ,GACxB,CAACpB,IAiBJ,OACEqB,EAAAA,EAAAA,KAAA,WAASV,IAAKb,EAAUH,GAAIA,EAAI2B,UAAWC,EAAiBC,UAC1DC,EAAAA,EAAAA,MAAA,OAAKH,UAAWC,EAAsBC,SAAA,EACpCC,EAAAA,EAAAA,MAAA,UAAQH,UAAWC,EAAeC,SAAA,EAChCC,EAAAA,EAAAA,MAAA,OAAKH,WAAWI,EAAAA,EAAAA,GAAKH,GAAqBC,SAAA,CAnB9B9B,KAClB,IAAKA,EAAKiC,QAAUjC,EAAKkC,IAAK,OAAO,KAErC,IAAIC,EAAS,GAKb,OAHInC,EAAKiC,OAASjC,EAAKiC,MAAMlB,OAAS,IAAGoB,EAASnC,EAAKiC,OACnDjC,EAAKkC,KAAOlC,EAAKkC,IAAInB,OAAS,IAAGoB,GAAM,IAAAC,OAAQpC,EAAKkC,OAGtDP,EAAAA,EAAAA,KAAA,QAAMV,IAAKV,EAAWqB,UAAWC,EAAYC,SAC1CK,GACI,EASAE,CAAWrC,GACXG,IACCwB,EAAAA,EAAAA,KAAA,OAAKV,IAAKV,EAAWqB,WAAWI,EAAAA,EAAAA,GAAKH,GAAcC,SAChD3B,OAIND,IACCyB,EAAAA,EAAAA,KAAA,QAAMV,IAAKV,EAAWqB,WAAWI,EAAAA,EAAAA,GAAKH,GAAiBC,SACpD5B,QAIPyB,EAAAA,EAAAA,KAAA,OAAKC,UAAWC,EAA0BC,SACvC/B,EAAUuC,KAAI,CAACC,EAAGC,KACjBb,EAAAA,EAAAA,KAACjC,EAAQ,CAASuB,IAAKV,EAAWkC,KAAMF,EAAEE,KAAsBC,QAASH,EAAEG,SAA5DF,WAIb,C","sources":["webpack://modelperil-timeline/./src/components/story/Story.module.scss?5b2e","components/story/Story.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Story_container__a3g7S\",\"contentWrapper\":\"Story_contentWrapper__-GV6O\",\"heading\":\"Story_heading__dxKEI\",\"titleWrapper\":\"Story_titleWrapper__1jBTh\",\"date\":\"Story_date__z54BV\",\"lineWrapper\":\"Story_lineWrapper__02RMg\",\"title\":\"Story_title__GkzTx\",\"subtitle\":\"Story_subtitle__tPXKK\",\"artifactsContainer\":\"Story_artifactsContainer__Dvt6D\"};","import clsx from 'clsx';\nimport { gsap } from 'gsap';\nimport ScrollTrigger from 'gsap/ScrollTrigger';\nimport { lazy, useEffect, useRef } from 'react';\nimport { Artifact as ArtifactModel, Date } from '../../models';\nimport { ComponentFactory, ArtifactType } from '../index';\nimport styles from './Story.module.scss';\n\ngsap.registerPlugin(ScrollTrigger);\n\nconst Artifact = lazy(() => ComponentFactory.ArtifactAsync());\n\nexport interface StoryProps {\n  artifacts: ArtifactModel[];\n  date: Date;\n  id?: string;\n  subtitle?: string;\n  title: string;\n}\n\nconst Story = (props: StoryProps) => {\n  const { artifacts, date, id, subtitle, title } = props;\n  const storyRef = useRef<HTMLDivElement>(null);\n  const animationRefs = useRef<HTMLDivElement[]>([]);\n\n  const addtoRefs = (el: HTMLDivElement) => {\n    if (el && !animationRefs.current.includes(el)) {\n      animationRefs.current.push(el);\n    }\n  };\n\n  useEffect(() => {\n    const ctx = gsap.context(() => {\n      if (animationRefs?.current.length > 0) {\n        animationRefs.current.forEach((ref) => {\n          gsap.from(ref, {\n            scrollTrigger: {\n              trigger: ref,\n              start: 'top bottom-=5%',\n              end: 'top center+=10%',\n              scrub: 0.5,\n              // markers: true,\n            },\n            x: '50px',\n            autoAlpha: 0,\n          });\n        });\n      }\n    }, storyRef); // <- selector scoping\n    return () => ctx.revert();\n  }, [animationRefs]);\n\n  const renderDate = (date: Date) => {\n    if (!date.month && !date.day) return null;\n\n    let result = '';\n\n    if (date.month && date.month.length > 0) result = date.month;\n    if (date.day && date.day.length > 0) result += ` ${date.day}`;\n\n    return (\n      <span ref={addtoRefs} className={styles.date}>\n        {result}\n      </span>\n    );\n  };\n\n  return (\n    <article ref={storyRef} id={id} className={styles.container}>\n      <div className={styles.contentWrapper}>\n        <header className={styles.heading}>\n          <div className={clsx(styles.titleWrapper)}>\n            {renderDate(date)}\n            {title && (\n              <div ref={addtoRefs} className={clsx(styles.title)}>\n                {title}\n              </div>\n            )}\n          </div>\n          {subtitle && (\n            <span ref={addtoRefs} className={clsx(styles.subtitle)}>\n              {subtitle}\n            </span>\n          )}\n        </header>\n        <div className={styles.artifactsContainer}>\n          {artifacts.map((a, i) => (\n            <Artifact key={i} ref={addtoRefs} type={a.type as ArtifactType} content={a.content} />\n          ))}\n        </div>\n      </div>\n    </article>\n  );\n};\n\nexport default Story;\n"],"names":["gsap","registerPlugin","ScrollTrigger","Artifact","lazy","ComponentFactory","ArtifactAsync","props","artifacts","date","id","subtitle","title","storyRef","useRef","animationRefs","addtoRefs","el","current","includes","push","useEffect","ctx","context","length","forEach","ref","from","scrollTrigger","trigger","start","end","scrub","x","autoAlpha","revert","_jsx","className","styles","children","_jsxs","clsx","month","day","result","concat","renderDate","map","a","i","type","content"],"sourceRoot":""}
{"version":3,"file":"static/js/Year.89e68547.chunk.js","mappings":"8KACA,QAAiC,6BAAjC,EAA0E,wBAA1E,EAA8G,wBAA9G,EAAqJ,2BAArJ,EAA2L,uB,uBCK3L,MAAMA,GAAQC,EAAAA,EAAAA,OAAK,IAAMC,EAAAA,EAAiBC,eAgF1C,EAxEcC,IACZ,MAAM,GAAEC,EAAE,WAAEC,EAAU,QAAEC,GAAYH,EAC9BI,GAAUC,EAAAA,EAAAA,QAAuB,OAChCC,EAAWC,IAAgBC,EAAAA,EAAAA,UAAS,IACpCC,EAAaC,IAAkBF,EAAAA,EAAAA,UAASG,OAAOC,YAChDC,EAAWJ,GAAe,IAE1BK,EAAcC,GACX,QAAUd,EAAGe,WAAa,IAAMD,EAGnCE,EAAWA,KACf,GAAIb,EAAQc,QAAS,CACnB,MAAMC,EAAeN,EAAW,IAAM,IAChCO,EAAaP,EAAW,GAAK,GAE7BQ,EAAYC,SAASC,gBAAgBjB,UACrCkB,EAAOC,KAAKC,IAAI,EAAGtB,EAAQc,QAAQS,UAAYR,EAAeC,EAAaC,GAC3EO,EAAWH,KAAKC,KAAc,EAARF,EAAapB,EAAQc,QAAQW,aAAgB,IAAK,KAE9EtB,EAAaqB,EACf,GAwBF,OArBAE,EAAAA,EAAAA,YAAU,KACR,MAAMC,EAAeA,KACnBrB,EAAeC,OAAOC,WAAW,EAKnC,OAFAD,OAAOqB,iBAAiB,SAAUD,GAE3B,KACLpB,OAAOsB,oBAAoB,SAAUF,EAAa,CACnD,GACA,KAEHD,EAAAA,EAAAA,YAAU,KACJ5B,GACFS,OAAOqB,iBAAiB,SAAUf,GAG7B,IAAMN,OAAOsB,oBAAoB,SAAUhB,KAEjD,CAACf,IAEsB,IAAnBC,EAAQ+B,OAAe,MAC5BC,EAAAA,EAAAA,MAAA,WACElC,GAAI,QAAUA,EAAGe,WACjBoB,IAAKhC,EACLiC,UAAWC,EACXC,MAAO,CAAE,eAAgBrC,EAAc,GAAEI,KAAe,QAA0BkC,SAAA,EAElFC,EAAAA,EAAAA,KAAA,OAAKJ,UAAWC,EAAiBE,UAC/BC,EAAAA,EAAAA,KAAA,QAAMJ,UAAWC,EAAiBE,SAAEvC,EAAGe,gBAEzCyB,EAAAA,EAAAA,KAAA,OAAKJ,WAAWK,EAAAA,EAAAA,GAAKJ,EAAqBpC,GAAcoC,GAAiBE,SACtErC,EAAQwC,KAAI,CAACC,EAAO7B,KACnB0B,EAAAA,EAAAA,KAAC7C,EAAK,CACJK,GAAIa,EAAWC,GAEf8B,MAAOD,EAAMC,MACbC,SAAUF,EAAME,SAChBC,UAAWH,EAAMI,MACjBC,KAAML,EAAMK,KACZC,OAAQhD,GAAca,IAAMZ,EAAQ+B,OAAS,GALxCnB,SAUd,C","sources":["webpack://modelperil-timeline/./src/components/year/Year.module.scss?5322","components/year/Year.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"sectionWrapper\":\"Year_sectionWrapper__haB5L\",\"yearTrack\":\"Year_yearTrack__pnkjG\",\"yearTitle\":\"Year_yearTitle__k451i\",\"storyWrapper\":\"Year_storyWrapper__C4zEb\",\"lastYear\":\"Year_lastYear__tNFQk\"};","import { CSSProperties, lazy, useEffect, useRef, useState } from 'react';\nimport { Story as StoryModel } from '../../models';\nimport { ComponentFactory } from '..';\nimport styles from './Year.module.scss';\nimport clsx from 'clsx';\n\nconst Story = lazy(() => ComponentFactory.StoryAsync());\n\nexport interface YearProps {\n  id: string;\n  stories: StoryModel[];\n  isLastYear: boolean;\n}\n\nconst Year = (props: YearProps) => {\n  const { id, isLastYear, stories } = props;\n  const yearRef = useRef<HTMLDivElement>(null);\n  const [scrollTop, setScrollTop] = useState(0);\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\n  const isMobile = windowWidth <= 600;\n\n  const getStoryId = (i: number) => {\n    return 'year-' + id.toString() + '-' + i;\n  };\n\n  const onScroll = () => {\n    if (yearRef.current) {\n      const stickyHeight = isMobile ? 160 : 100;\n      const yearRadius = isMobile ? 40 : 26;\n\n      const winScroll = document.documentElement.scrollTop;\n      const diff = Math.min(0, yearRef.current.offsetTop - stickyHeight - yearRadius - winScroll);\n      const scrolled = Math.min(((diff * -1) / yearRef.current.offsetHeight) * 100, 100);\n\n      setScrollTop(scrolled);\n    }\n  };\n\n  useEffect(() => {\n    const handleResize = () => {\n      setWindowWidth(window.innerWidth);\n    };\n\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (isLastYear) {\n      window.addEventListener('scroll', onScroll);\n    }\n\n    return () => window.removeEventListener('scroll', onScroll);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isLastYear]);\n\n  return stories.length === 0 ? null : (\n    <section\n      id={'year-' + id.toString()}\n      ref={yearRef}\n      className={styles.sectionWrapper}\n      style={{ '--yearHeight': isLastYear ? `${scrollTop}%` : '100%' } as CSSProperties}\n    >\n      <div className={styles.yearTrack}>\n        <span className={styles.yearTitle}>{id.toString()}</span>\n      </div>\n      <div className={clsx(styles.storyWrapper, isLastYear && styles.lastYear)}>\n        {stories.map((story, i) => (\n          <Story\n            id={getStoryId(i)}\n            key={i}\n            title={story.title}\n            subtitle={story.subtitle}\n            artifacts={story.forms}\n            date={story.date}\n            isLast={isLastYear && i === stories.length - 1}\n          />\n        ))}\n      </div>\n    </section>\n  );\n};\n\nexport default Year;\n"],"names":["Story","lazy","ComponentFactory","StoryAsync","props","id","isLastYear","stories","yearRef","useRef","scrollTop","setScrollTop","useState","windowWidth","setWindowWidth","window","innerWidth","isMobile","getStoryId","i","toString","onScroll","current","stickyHeight","yearRadius","winScroll","document","documentElement","diff","Math","min","offsetTop","scrolled","offsetHeight","useEffect","handleResize","addEventListener","removeEventListener","length","_jsxs","ref","className","styles","style","children","_jsx","clsx","map","story","title","subtitle","artifacts","forms","date","isLast"],"sourceRoot":""}